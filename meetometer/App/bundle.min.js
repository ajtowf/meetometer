var meetometer;(function(n){"use strict";var i=function(){function n(n,t){this.people=n;this.avgSalary=t}return n}(),t;n.settingsModel=i;t=function(){function n(n,t,i,r,u){this.id=n;this.date=t;this.people=i;this.avgSalary=r;this.durationSeconds=u}return n}();n.meetingModel=t})(meetometer||(meetometer={})),function(n){"use strict";function t(){return{link:function(n,t,i){var r=n.$eval(i.ngModel),u=n.$watch(r,function(n){n&&(t.slider("refresh"),u())})}}}n.sliderInitDirective=t}(meetometer||(meetometer={})),function(n){"use strict";var t=function(){function t(n,t,i,r){var u=this,f;this.$scope=n;this.$http=t;this.$timeout=i;this.storageService=r;f=r.getSettings();n.loginErrorMessage="";n.username="test";n.password="test123test!";n.people=f.people;n.avgSalary=f.avgSalary;n.meetings=r.getMeetings();n.$watch("meetings",function(){return u.saveMeetings()},!0);n.$watch("people",function(){return u.saveSettings()});n.$watch("avgSalary",function(){return u.saveSettings()});n.running=!1;n.cost=0;n.duration=0;n.vm=this}return t.prototype.saveSettings=function(){this.storageService.saveSettings(new n.settingsModel(this.$scope.people,this.$scope.avgSalary))},t.prototype.saveMeetings=function(){this.storageService.saveMeetings(this.$scope.meetings)},t.prototype.calcCost=function(n,t,i){return 1.3142*i*n*t/633600},t.prototype.tick=function(){var n=this,t=function(){n.$scope.cost+=n.calcCost(n.$scope.people,n.$scope.avgSalary,1);n.$scope.duration++;n.cancelPromise=n.$timeout(t,1e3)};this.cancelPromise=this.$timeout(t,1e3)},t.prototype.start=function(){this.$scope.running=!0;this.tick()},t.prototype.stop=function(){this.$scope.running=!1;this.$timeout.cancel(this.cancelPromise)},t.prototype.reset=function(){this.$scope.cost=0;this.$scope.duration=0},t.prototype.storeCurrentMeeting=function(){this.$scope.running&&this.stop();var t=new n.meetingModel(this.$scope.meetings.length+1,new Date,this.$scope.people,this.$scope.avgSalary,this.$scope.duration);this.$scope.meetings.push(t);this.reset()},t.prototype.deleteMeeting=function(n){var t=this.$scope.meetings.indexOf(n);t>-1&&this.$scope.meetings.splice(t,1)},t.$inject=["$scope","$http","$timeout","storageService"],t}();n.meetingController=t}(meetometer||(meetometer={})),function(n){"use strict";var t=function(){function t(){this.meetometerSettingsKey="meetometerSettingsKey";this.meetometerMeetometerKey="meetometerMeetometerKey"}return t.prototype.getSettings=function(){var n=amplify.store(this.meetometerSettingsKey);return n||(n={people:5,avgSalary:4e4}),n},t.prototype.saveSettings=function(n){amplify.store(this.meetometerSettingsKey,n)},t.prototype.getMeetings=function(){var t=amplify.store(this.meetometerMeetometerKey);return t||(t=[new n.meetingModel(1,new Date,5,45e3,2700),new n.meetingModel(2,new Date,20,3e4,1800)]),t},t.prototype.saveMeetings=function(n){amplify.store(this.meetometerMeetometerKey,n)},t}();n.storageService=t}(meetometer||(meetometer={})),function(n){"use strict";angular.module("app",[]).directive("sliderInit",n.sliderInitDirective).service("storageService",n.storageService).controller("meetingController",n.meetingController)}(meetometer||(meetometer={}));